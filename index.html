<!DOCTYPE html>
<html lang="ja">
    <head>
        <title>百人一首</title>
        <script src="./file/jquery.min.js.download"></script>
        <link rel="stylesheet" href="./file/hyakunin.css">
    </head>
    <body>
<div id="main">
	<p id="playing7b">百人一首 ランダム or 連続再生</p>
今年の百人一首をすべて、自動で読み上げます。<br>
順番どおり連続再生も、シャッフルしてランダム再生も可能です。<br>
<em>岩渕大生</em><br>

	<br>
	<button id="btn1" class="btn btn--orange btn--radius">連続再生</button>
        <button id="btn2" class="btn btn--orange btn--radius">ランダム再生</button>
        <button id="btn5" class="btn btn--orange btn--radius">リセット</button>
	<br>
	<br>
	<audio id="audio" src="file/00.wav" controls="" autoplay=""></audio>
	<br>
	<button id="btn3" class="btn btn--orange">前へ</button>	
	<button id="btn4" class="btn btn--orange">次へ</button>	<br>	
	
	<br>	
	------------------------------------------<br>
        
        <img src="file/im1.png"/>
        
	<br>歌：
	<p id="playing1">序歌. 難波津に咲くやこの花冬ごもり　今を春べと咲くやこの花（ 王仁 ）</p>
	<br>上の句：
	<p id="playing2">なにはづに さくやこのはな ふゆごもり</p>	
	<br>下の句：
	<p id="playing3">いまははるべと さくやこのはな</p>	
	<br>

<script>
	
/*==== 音声ファイルのリスト ====*/
var songs = [
    "file/01.wav",
    "file/02.wav",
    "file/03.wav",
    "file/07.wav",
    "file/09.wav",
    "file/12.wav",
    "file/30.wav",
    "file/31.wav",
    "file/39.wav",
    "file/43.wav",
    "file/45.wav",
    "file/52.wav",
    "file/56.wav",
    "file/58.wav",
    "file/64.wav",
    "file/67.wav",
    "file/69.wav",
    "file/78.wav",
    "file/79.wav",
    "file/96.wav"
];	
		/*==== シャッフル ====*/
		function arrayShuffle(array) {
  for(var i = (array.length - 1); 0 < i; i--){
    // 0〜(i+1)の範囲で値を取得
    var r = Math.floor(Math.random() * (i + 1));
    // 要素の並び替えを実行
    var tmp = array[i];
    array[i] = array[r];
    array[r] = tmp;
  }
  return array;
}

		/*==== ボタンを押したときの処理 ====*/
$(function(){
  $('#btn5').on('click',function(){
    window.location.reload();
  });
});		

     
                
$(function(){
  $('#btn1').on('click',function(){

songs = [
    "file/01.wav",
    "file/02.wav",
    "file/03.wav",
    "file/07.wav",
    "file/09.wav",
    "file/12.wav",
    "file/30.wav",
    "file/31.wav",
    "file/39.wav",
    "file/43.wav",
    "file/45.wav",
    "file/52.wav",
    "file/56.wav",
    "file/58.wav",
    "file/64.wav",
    "file/67.wav",
    "file/69.wav",
    "file/78.wav",
    "file/79.wav",
    "file/96.wav"
];

    index = 0;	  
	  randSongs = songs[index];
	  	$("#audio").attr("src",randSongs);
	  	$("#audio").prop("autoplay",true);	  
	  	  kasi(index);
	  document.getElementById( "playing4" ).textContent ="連続再生中";	
  });
});		
		
		
		
		/*==== ボタンを押したときの処理 ====*/
$(function(){
  $('#btn2').on('click',function(){

arrayShuffle(songs);

    index = 0;	  
	  randSongs = songs[index];
	  	$("#audio").attr("src",randSongs);
	  	$("#audio").prop("autoplay",true);	  
	  	  kasi(index);
	  document.getElementById( "playing4" ).textContent ="ランダム再生中";	  
	});
});
		

/* ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ */
	
	
/*==== 終了時の処理 ====*/	
var index = -1;
audio.addEventListener('ended', function(){
  if (index < songs.length) {
  index++;	
  randSongs = songs[index];
$("#audio").attr("src",randSongs);
$("#audio").prop("autoplay",true);
	  kasi(index);
  }
  else {
    randSongs = songs[0];
$("#audio").attr("src",randSongs);
$("#audio").prop("autoplay",true);
	  kasi(index);
    index = 0;
  }
});		

/*==== 前後ボタン ====*/
$(function(){
  $('#btn3').on('click',function(){
  			index--;	
  		if (index <= -1) {	
    		index = songs.length-1;
  		}
	  	randSongs = songs[index];
	  	$("#audio").attr("src",randSongs);
	  	$("#audio").prop("autoplay",true);
	  kasi(index);
	  
  });
});		

$(function(){
  $('#btn4').on('click',function(){
	  	index++;	
  if (index >= songs.length) {	

    index = 0;
  		}
	  randSongs = songs[index];
	  	$("#audio").attr("src",randSongs);
	  	$("#audio").prop("autoplay",true);
	  kasi(index);
  });
});		
		
		
		
/*==== 文字の処理 ====*/
function kasi( index ){
          randSongs = songs[index].replace(".wav","");
switch (randSongs){
case 'file/01':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="1. 秋の田のかりほの庵の苫をあらみ　わが衣手は露にぬれつつ ( 天智天皇 )";
document.getElementById( "playing2" ).textContent ="あきのたの かりほのいほの とまをあらみ";
document.getElementById( "playing3" ).textContent ="わかころもては つゆにぬれつつ";
break;
case 'file/02':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="2. 春過ぎて夏来にけらし白妙の　衣干すてふ天の香具山 ( 持統天皇 )";
document.getElementById( "playing2" ).textContent ="はるすきて なつきにけらし しろたへの";
document.getElementById( "playing3" ).textContent ="ころもほすてふ あまのかくやま";
break;
case 'file/03':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="3. あしびきの山鳥の尾のしだり尾の　ながながし夜をひとりかも寝む ( 柿本人麻呂 )";
document.getElementById( "playing2" ).textContent ="あしひきの やまとりのをの したりをの";
document.getElementById( "playing3" ).textContent ="なかなかしよを ひとりかもねむ";
break;
case 'file/07':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="7. 天の原ふりさけ見れば春日なる　三笠の山に出でし月かも ( 安倍仲麿 )";
document.getElementById( "playing2" ).textContent ="あまのはら ふりさけみれは かすかなる";
document.getElementById( "playing3" ).textContent ="みかさのやまに いてしつきかも";
break;
case 'file/09':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="9. 花の色は移りにけりないたづらに　わが身世にふるながめせしまに ( 小野小町 )";
document.getElementById( "playing2" ).textContent ="はなのいろは うつりにけりな いたつらに";
document.getElementById( "playing3" ).textContent ="わかみよにふる なかめせしまに";
break;
case 'file/12':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="12. 天つ風雲の通ひ路吹きとぢよ　乙女の姿しばしとどめむ ( 僧正遍昭 )";
document.getElementById( "playing2" ).textContent ="あまつかせ くものかよひち ふきとちよ";
document.getElementById( "playing3" ).textContent ="をとめのすかた しはしととめむ";
break;
case 'file/30':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="30. 有明のつれなく見えし別れより　暁ばかり憂きものはなし ( 壬生忠岑 )";
document.getElementById( "playing2" ).textContent ="ありあけの つれなくみえし わかれより";
document.getElementById( "playing3" ).textContent ="あかつきはかり うきものはなし";
break;
case 'file/31':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="31. 朝ぼらけ有明の月と見るまでに　吉野の里に降れる白雪 ( 坂上是則 )";
document.getElementById( "playing2" ).textContent ="あさほらけ ありあけのつきと みるまてに";
document.getElementById( "playing3" ).textContent ="よしののさとに ふれるしらゆき";
break;
case 'file/39':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="39. 浅茅生の小野の篠原忍ぶれど　あまりてなどか人の恋しき ( 参議等 )";
document.getElementById( "playing2" ).textContent ="あさちふの をののしのはら しのふれと";
document.getElementById( "playing3" ).textContent ="あまりてなとか ひとのこひしき";
break;
case 'file/43':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="43. 逢ひ見てののちの心にくらぶれば　昔はものを思はざりけり ( 権中納言敦忠 )";
document.getElementById( "playing2" ).textContent ="あひみての のちのこころに くらふれは";
document.getElementById( "playing3" ).textContent ="むかしはものを おもはさりけり";
break;
case 'file/45':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="45. あはれともいふべき人は思ほえで　身のいたずらになりぬべきかな ( 謙徳公 )";
document.getElementById( "playing2" ).textContent ="あはれとも いふへきひと はおもほ";
document.getElementById( "playing3" ).textContent ="えてみのいたつ らになりぬへき";
break;
case 'file/52':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="52. 明けぬれば暮るるものとは知りながら　なほ恨めしき朝ぼらけかな ( 藤原道信朝臣 )";
document.getElementById( "playing2" ).textContent ="あけぬれは くるるものとは しりなから";
document.getElementById( "playing3" ).textContent ="なほうらめしき あさほらけかな";
break;
case 'file/56':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="56. あらざらむこの世のほかの思ひ出に　いまひとたびの逢ふこともがな ( 和泉式部 )";
document.getElementById( "playing2" ).textContent ="あらさらむ このよのほかの おもひてに";
document.getElementById( "playing3" ).textContent ="いまひとたひの あふこともかな";
break;
case 'file/58':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="58. 有馬山猪名の篠原風吹けば　いでそよ人を忘れやはする ( 大弐三位 )";
document.getElementById( "playing2" ).textContent ="ありまやま ゐなのささはら かせふけは";
document.getElementById( "playing3" ).textContent ="いてそよひとを わすれやはする";
break;
case 'file/64':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="64. 朝ぼらけ宇治の川霧たえだえに　あらはれわたる瀬々の網代木 ( 権中納言定頼 )";
document.getElementById( "playing2" ).textContent ="あさほらけ うちのかはきり たえたえに";
document.getElementById( "playing3" ).textContent ="あらはれわたる せせのあしろき";
break;
case 'file/67':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="67. 春の夜の夢ばかりなる手枕に　かひなく立たむ名こそをしけれ ( 周防内侍 )";
document.getElementById( "playing2" ).textContent ="はるのよの ゆめはかりなる たまくらに";
document.getElementById( "playing3" ).textContent ="かひなくたたむ なこそをしけれ";
break;
case 'file/69':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="69. 嵐吹く三室の山のもみぢ葉は　竜田の川の錦なりけり ( 能因法師 )";
document.getElementById( "playing2" ).textContent ="あらしふく みむろのやまの もみちはは";
document.getElementById( "playing3" ).textContent ="たつたのかはの にしきなりけり";
break;
case 'file/78':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="78. 淡路島通ふ千鳥の鳴く声に　いく夜寝覚めぬ須磨の関守 ( 源兼昌 )";
document.getElementById( "playing2" ).textContent ="あはちしま かよふちとりの なくこゑに";
document.getElementById( "playing3" ).textContent ="いくよねさめぬ すまのせきもり";
break;
case 'file/79':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="79. 秋風にたなびく雲のたえ間より　漏れ出づる月の影のさやけさ ( 左京大夫顕輔 )";
document.getElementById( "playing2" ).textContent ="あきかせに たなひくくもの たえまより";
document.getElementById( "playing3" ).textContent ="もれいつるつきの かけのさやけさ";
break;
case 'file/96':
/* ーーーーーーーーーーーーーーーーーーーーーーー */
document.getElementById( "playing1" ).textContent ="96. 花さそふ嵐の庭の雪ならで　ふりゆくものはわが身なりけり ( 入道前太政大臣 )";
document.getElementById( "playing2" ).textContent ="はなさそふ あらしのにはの ゆきならて";
document.getElementById( "playing3" ).textContent ="ふりゆくものは わかみなりけり";
break;
		
		
  default:
	  /* ーーーーーーーーーーーーーーーーーーーーーーー */
	  document.getElementById( "playing1" ).textContent ="エラー";
	  document.getElementById( "playing2" ).textContent ="エラー";		
	  document.getElementById( "playing3" ).textContent ="エラー";

}
}

		
	
		
		
		</script>
</div>
</body>
</html>